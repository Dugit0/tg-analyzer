# tg-analyzer
## Постановка задачи

Предполагается создать анализатор telegram чатов, который бы сканировал чат/чаты и выдавал бы обобщенную статистику.

Например:
- График количества сообщений по дням
- График количества текста в сообщениях по дням
- Общее количество минут в голосовых сообщениях
- Средняя длительность голосовых
- Общее количество фотографий
- И т.п.

Предполагается следующий порядок действий:
1. Чтобы не создавать лишних проблем с уязвимостями приложения при подключении его к личному аккаунту telegram, было решено, что пользователь должен сам предварительно выгрузить их.
    - Это можно сделать через официальное приложение telegram. "Настройки" -> "Продвинутые настройки" -> "Экспорт данных из Telegram" -> "Машиночитаемый JSON"
2. Пользователь запускает приложение, выбирает интересующий его чат/чаты, период, за который он хочет посмотреть статистику, и интересующие его статистические показатели.
3. Приложение производит анализ JSON-файла и выдает интересующую информацию в формате HTML-файла со статистикой в виде графиков.

## Предполагаемые инструменты
- json - работа с данными telegram и их парсинг
- PyQt5/PySide2 - GUI
- Pandas и Mathplotlib/Seaborn - статистическая работа с данными, отрисовка графиков
- Jinja и yattag/xml.etree - построение отчета в формате HTML

## Макет GUI
<img src="tg-analyzer-gui-layout.png">

## Фронты работы
- Анализ данных
    - Нужно проанализировать json файл, понять его структуру и разработать план того, как мы будем с ним работать
        - Может вообще ничего не нужно и мы будем работать с сырым json (но нужно написать, как с этим работать)
        - Может нам нужно разработать БД и подключить SQLite (но это очень сомнительно)
        - Может нам нужно разбить все на классы и написать к ним документацию
        - Могут возникнуть проблемы с тем, что мы забудем какой-нибудь класс или возможность тг (например сообщение о семене авы беседы, смайлик кости и дартса, которые являются рандомными и пр.)
        - Нужно либо тестировать на большом количестве данных (и надеяться на лучшее), либо читать исходники в API, используемого в Telegram Desktop
- Модуль анализатора
    - Имеет смысл делать после пункта "Анализ данных"
    - Нужно накидать то, что мы будем анализировать
    - Возможно сделать пару оптимизаций по поводу бинпоиска даты, вместо линейного поиска, подсчет в один цикл всех фич, а не 1 фича - 1 проход, предусмотреть возможность масштабирования фич (возможно анализа нескольких чатов вместе)
- Графики
    - Имеет смысл делать после пункта "Модуль анализатора"
    - Подготовка и чистка данных, запихивание их в датафрейм
    - Отрисовка графиков на все случаи жизни, сохранение их в файлы и передача их названий в сторонний модуль
- GUI
    - Написание простого GUI
    - Предусмотреть возможность добавление потенциально неограниченного числа фич
    - Предусмотреть возможность локализации (т.е. провести интернализацию)
    - Сделать перевод
- HTML/CSS шаблоны
    - Изучить HTML и CSS, нарисовать простой макет
    - Сделать из макета шаблон для Jinja
    - Понять, как масштабировать этот шаблон на несколько фич

